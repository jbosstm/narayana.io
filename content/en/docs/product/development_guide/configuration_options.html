<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Configuration options</title>
<style>
@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";
@import "https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css";

h6 > .content > .title,h7,h8,h9 {
    font-family:"Open Sans","DejaVu Sans",sans-serif;
    font-weight:normal;
    font-size:.85em;
    font-style:normal;
    color:#ba8425;
    text-rendering:optimizeLegibility;
    margin-top:1em;
    margin-bottom:1em;
    line-height:2em
}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Configuration options</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_loading_a_configuration">Loading a configuration</a></li>
<li><a href="#_arjunacore_options">ArjunaCore Options</a></li>
<li><a href="#_narayana_jta_configuration_options">Narayana JTA Configuration options</a></li>
<li><a href="#_narayana_jts_options">Narayana JTS Options</a></li>
<li><a href="#_narayana_ws_atws_ba_options">Narayana WS-AT/WS-BA Options</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_loading_a_configuration"><a class="anchor" href="#_loading_a_configuration"></a>Loading a configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each module of the system contains a <code>module propertyManager</code> class, which provides static getter methods for one or more <code>name EnvironmentBean</code> classes.
An example is <code>com.arjuna.ats.arjuna.commmon.arjPropertyManager</code>.
These environment beans are standard JavaBean containing properties for each configuration option in the system.
Typical usage is of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">int</span> defaultTimeout = arjPropertyManager.getCoordinatorEnvironmentBean().getDefaultTimeout();</code></pre>
</div>
</div>
<div class="paragraph">
<p>These beans are singletons, instantiated upon first access, using the following algorithm.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: Algorithm for environment bean instantiation</div>
<ol class="arabic">
<li>
<p>The properties are loaded and populated from a properties file named and located as follows:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If the properties file name property <code>com.arjuna.ats.arjuna.common.propertiesFile</code> is set, its value is used as the file name.</p>
</li>
<li>
<p>If not, the default file name <code>jbossts-properties.xml</code> is used.
The definition of the used value can be found at Narayana distribution jar file under <code>META-INF/MANIFEST.MF</code> at property <code>arjuna-properties-file</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>The file thus named is searched for by, in order</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>absolute path</p>
</li>
<li>
<p><code>user.dir</code></p>
</li>
<li>
<p><code>user.home</code></p>
</li>
<li>
<p><code>java.home</code></p>
</li>
<li>
<p>directories contained on the classpath</p>
</li>
<li>
<p>a default file embedded in the product .jar file</p>
<div class="paragraph">
<p>if you use Narayana dependency <code>org.jboss.narayana.jts:narayana-jts-idlj</code> you can check the default properties settings <a href="https://github.com/jbosstm/narayana/blob/master/ArjunaJTS/narayana-jts-idlj/src/main/resources/jbossts-properties.xml">
in the Narayana repository at github</a>.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>The file is treated as being of standard <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Properties.html">java.util.Properties xml format</a> and loaded accordingly.
The <code>entry</code> names are of the form <code>EnvironmentBeanClass.propertyName</code>.</p>
<div class="paragraph">
<p>An example is <code>&lt;entrykey="CoordinatorEnvironmentBean.commitOnePhase"&gt;YES&lt;/entry&gt;</code></p>
</div>
<div class="paragraph">
<p>In specific cases when you want to set properties on configuration beans other that the default bean instances the form is <code>EnvironmentBeanClass.&lt;storeType&gt;.propertyName</code>.</p>
</div>
<div class="paragraph">
<p>An example is <code>&lt;entry key="ObjectStoreEnvironmentBean.communicationStore.objectStoreType"&gt;</code> <code>com.arjuna.ats.internal.arjuna.objectstore.VolatileStore&lt;/entry&gt;</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Valid values for Boolean properties are case-insensitive, and may be one of <code>NO</code>/<code>YES</code>, <code>FALSE</code>/<code>TRUE</code>, <code>OFF</code>/<code>ON</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the case of properties that take multiple values, they are white-space-delimited.</p>
</div>
<div class="listingblock">
<div class="title">Example recovery modules of Recovery Environment Bean</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RecoveryEnvironmentBean.recoveryModuleClassNames</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    com.arjuna.ats.internal.arjuna.recovery.AtomicActionRecoveryModule
    com.arjuna.ats.internal.txoj.recovery.TORecoveryModule
<span class="tag">&lt;/entry&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p>After the file is loaded, it is cached and is not re-read until the JVM is restarted.
Changes to the properties file require a restart in order to take effect.</p>
</li>
<li>
<p>After the properties are loaded, the EnvironmentBean is then inspected and, for each field, if the properties contains a matching key in the search order as follows, the <code>setter</code> method for that field is invoked with the value from the properties, or the system properties if different.</p>
<div class="ulist">
<ul>
<li>
<p><code>Fully.Qualified.NameEnvironmentBean.propertyName</code></p>
<div class="paragraph">
<p>for example <code>com.arjuna.ats.arjuna.common.CoordinatorEnvironmentBean.commitOnePhase</code></p>
</div>
</li>
<li>
<p><code>NameEnvironmentBean.propertyName</code> (<code>this is the preferred form used in the properties file</code>)</p>
<div class="paragraph">
<p>for example <code>CoordinatorEnvironmentBean.commitOnePhase</code></p>
</div>
</li>
<li>
<p>the old <code>com.arjuna&#8230;&#8203;</code> properties key defined at bean by annnotations <code>@PropertyPrefix</code> or <code>@FullPropertyName</code> (<code class="replaceable">deprecated, for backwards compatibility only</code>).</p>
<div class="paragraph">
<p>for example <code>com.arjuna.ats.arjuna.coordinator.commitOnePhase</code></p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>The bean is then returned to the caller, which may further override values by calling setter methods.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The implementation reads most bean properties only once, as the consuming component or class is instantiated.
This usually happens the first time a transaction is run.
As a result, calling <code>setter</code> methods to change the value of bean properties while the system is running typically has no effect, unless it is done prior to any use of the transaction system.
Altered bean properties are not persisted back to the properties file.</p>
</div>
<div class="paragraph">
<p>You can configure the system using a bean wiring system such as JBoss Microcontainer or Spring.
Take care when instantiating beans, to obtain the singleton via the static getter (factory) method on the module property manager.
Using a new bean instantiated with the default constructor is ineffective, since it is not possible to pass this configured bean back to the property management system.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_arjunacore_options"><a class="anchor" href="#_arjunacore_options"></a>ArjunaCore Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The canonical reference for configuration options is the Javadoc of the various <code>EnvironmentBean</code> classes.
For ArjunaCore these are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>com.arjuna.common.internal.util.logging.LoggingEnvironmentBean</code></p>
</li>
<li>
<p><code>com.arjuna.common.internal.util.logging.basic.BasicLogEnvironmentBean</code></p>
</li>
<li>
<p><code>com.arjuna.ats.txoj.common.TxojEnvironmentBean</code></p>
</li>
<li>
<p><code>com.arjuna.ats.arjuna.common.CoordinatorEnvironmentBean</code></p>
</li>
<li>
<p><code>com.arjuna.ats.arjuna.common.ObjectStoreEnvironmentBean</code></p>
</li>
<li>
<p><code>com.arjuna.ats.arjuna.common.RecoveryEnvironmentBean</code></p>
</li>
<li>
<p><code>com.arjuna.ats.arjuna.common.CoreEnvironmentBean</code></p>
</li>
<li>
<p><code>com.arjuna.ats.internal.arjuna.objectstore.hornetq.HornetqJournalEnvironmentBean</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_narayana_jta_configuration_options"><a class="anchor" href="#_narayana_jta_configuration_options"></a>Narayana JTA Configuration options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The canonical reference for configuration options is the javadoc of the various EnvironmentBean classes.
For Narayana JTA, these classes are the ones provided by ArjunaCore, as well as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>com.arjuna.ats.jdbc.common.JDBCEnvironmentBean</code></p>
</li>
<li>
<p><code>com.arjuna.ats.jta.common.JTAEnvironmentBean</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_narayana_jts_options"><a class="anchor" href="#_narayana_jts_options"></a>Narayana JTS Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The canonical reference for configuration options is the javadoc of the various <code>EnvironmentBean</code> classes.
For Narayana JTS these are the ones provided by ArjunaCore, as well as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>com.arjuna.orbportability.common.OrbPortabilityEnvironmentBean</code></p>
</li>
<li>
<p><code>com.arjuna.ats.jts.common.JTSEnvironmentBean</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_narayana_ws_atws_ba_options"><a class="anchor" href="#_narayana_ws_atws_ba_options"></a>Narayana WS-AT/WS-BA Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For Narayana WebService transaction protocols these are the ones provided by ArjunaCore, as well as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.jboss.jbossts.xts.environment.WSCEnvironmentBean</code></p>
</li>
<li>
<p><code>org.jboss.jbossts.xts.environment.WSCFEnvironmentBean</code></p>
</li>
<li>
<p><code>org.jboss.jbossts.xts.environment.WSTEnvironmentBean</code></p>
</li>
<li>
<p><code>org.jboss.jbossts.xts.environment.XTSEnvironmentBean</code></p>
</li>
<li>
<p><code>org.jboss.jbossts.xts.environment.RecoveryEnvironmentBean</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-09-27 14:38:03 +0100
</div>
</div>
</body>
</html>