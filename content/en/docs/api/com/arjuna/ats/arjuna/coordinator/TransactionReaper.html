<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.17) on Thu Feb 16 12:15:06 GMT 2023 -->
<title>TransactionReaper (Narayana: narayana-full 6.0.0.Final API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-02-16">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../jquery/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TransactionReaper (Narayana: narayana-full 6.0.0.Final API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":9,"i8":9,"i9":10,"i10":10,"i11":10,"i12":10,"i13":9,"i14":9,"i15":9,"i16":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TransactionReaper.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>Narayana: narayana-full 6.0.0.Final</b></div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.arjuna.ats.arjuna.coordinator</a></div>
<h2 title="Class TransactionReaper" class="title">Class TransactionReaper</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.arjuna.ats.arjuna.coordinator.TransactionReaper</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public class <span class="typeNameLabel">TransactionReaper</span>
extends java.lang.Object</pre>
<div class="block">Class to record transactions with non-zero timeout values, and class to
 implement a transaction reaper thread which terminates these transactions
 once their timeout elapses.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>JTS 1.0.</dd>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>$Id: TransactionReaper.java 2342 2006-03-30 13:06:17Z $</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Mark Little (mark@arjuna.com)</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#defaultCancelFailWaitPeriod">defaultCancelFailWaitPeriod</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#defaultCancelWaitPeriod">defaultCancelWaitPeriod</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#defaultCheckPeriod">defaultCheckPeriod</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#defaultTracePeriod">defaultTracePeriod</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#defaultUntracedPeriod">defaultUntracedPeriod</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#defaultZombieMax">defaultZombieMax</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DYNAMIC">DYNAMIC</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NORMAL">NORMAL</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#PERIODIC">PERIODIC</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addListener(com.arjuna.ats.arjuna.coordinator.listener.ReaperMonitor)">addListener</a></span>&#8203;(<a href="listener/ReaperMonitor.html" title="interface in com.arjuna.ats.arjuna.coordinator.listener">ReaperMonitor</a>&nbsp;listener)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#check()">check</a></span>()</code></th>
<td class="colLast">
<div class="block">process all entries in the timeout queue which have
 expired.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkingPeriod()">checkingPeriod</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doWork()">doWork</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRemainingTimeoutMills(java.lang.Object)">getRemainingTimeoutMills</a></span>&#8203;(java.lang.Object&nbsp;control)</code></th>
<td class="colLast">
<div class="block">Given the transaction instance, this will return the time left before the
 transaction is automatically rolled back if it has not been terminated.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTimeout(java.lang.Object)">getTimeout</a></span>&#8203;(java.lang.Object&nbsp;control)</code></th>
<td class="colLast">
<div class="block">Given a Control, return the associated timeout, or 0 if we do not know
 about it.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#insert(com.arjuna.ats.arjuna.coordinator.Reapable,int)">insert</a></span>&#8203;(<a href="Reapable.html" title="interface in com.arjuna.ats.arjuna.coordinator">Reapable</a>&nbsp;control,
      int&nbsp;timeout)</code></th>
<td class="colLast">
<div class="block">timeout is given in seconds, but we work in milliseconds.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#instantiate()">instantiate</a></span>()</code></th>
<td class="colLast">
<div class="block">Currently we let the reaper thread run at same priority as other threads.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isDynamic()">isDynamic</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#numberOfTimeouts()">numberOfTimeouts</a></span>()</code></th>
<td class="colLast">
<div class="block">Return the number of timeouts registered.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#numberOfTransactions()">numberOfTransactions</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#remove(java.lang.Object)">remove</a></span>&#8203;(java.lang.Object&nbsp;control)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeListener(com.arjuna.ats.arjuna.coordinator.listener.ReaperMonitor)">removeListener</a></span>&#8203;(<a href="listener/ReaperMonitor.html" title="interface in com.arjuna.ats.arjuna.coordinator.listener">ReaperMonitor</a>&nbsp;listener)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#terminate(boolean)">terminate</a></span>&#8203;(boolean&nbsp;waitForTransactions)</code></th>
<td class="colLast">
<div class="block">Terminate the transaction reaper.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#transactionLifetime()">transactionLifetime</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>static <a href="TransactionReaper.html" title="class in com.arjuna.ats.arjuna.coordinator">TransactionReaper</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#transactionReaper()">transactionReaper</a></span>()</code></th>
<td class="colLast">
<div class="block">Starting with 4.8, this method will always return an instance, will never return null.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#waitForWork()">waitForWork</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="NORMAL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NORMAL</h4>
<pre>public static final&nbsp;java.lang.String NORMAL</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.NORMAL">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="DYNAMIC">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DYNAMIC</h4>
<pre>public static final&nbsp;java.lang.String DYNAMIC</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.DYNAMIC">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="PERIODIC">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PERIODIC</h4>
<pre>public static final&nbsp;java.lang.String PERIODIC</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.PERIODIC">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="defaultCheckPeriod">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>defaultCheckPeriod</h4>
<pre>public static final&nbsp;long defaultCheckPeriod</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.defaultCheckPeriod">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="defaultCancelWaitPeriod">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>defaultCancelWaitPeriod</h4>
<pre>public static final&nbsp;long defaultCancelWaitPeriod</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.defaultCancelWaitPeriod">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="defaultCancelFailWaitPeriod">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>defaultCancelFailWaitPeriod</h4>
<pre>public static final&nbsp;long defaultCancelFailWaitPeriod</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.defaultCancelFailWaitPeriod">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="defaultUntracedPeriod">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>defaultUntracedPeriod</h4>
<pre>public static final&nbsp;long defaultUntracedPeriod</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.defaultUntracedPeriod">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="defaultTracePeriod">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>defaultTracePeriod</h4>
<pre>public static final&nbsp;long defaultTracePeriod</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.defaultTracePeriod">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="defaultZombieMax">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>defaultZombieMax</h4>
<pre>public static final&nbsp;int defaultZombieMax</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.defaultZombieMax">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="checkingPeriod()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkingPeriod</h4>
<pre class="methodSignature">public final&nbsp;long&nbsp;checkingPeriod()</pre>
</li>
</ul>
<a id="check()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>check</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;check()</pre>
<div class="block">process all entries in the timeout queue which have
 expired. entries for newly expired transactions are passed
 to a worker thread for cancellation and requeued for
 subsequent progress checks. the worker is given a kick if
 such checks find it is wedged.
 
 Timeout is given in milliseconds.

 Runs on the ReaperThread</div>
</li>
</ul>
<a id="waitForWork()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForWork</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;waitForWork()</pre>
</li>
</ul>
<a id="doWork()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doWork</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;doWork()</pre>
</li>
</ul>
<a id="numberOfTransactions()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numberOfTransactions</h4>
<pre class="methodSignature">public final&nbsp;long&nbsp;numberOfTransactions()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of items in the reaper's list.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>JTS 2.2.

 Note: this is a) expensive and b) an approximation. Should be called only by test code.</dd>
</dl>
</li>
</ul>
<a id="numberOfTimeouts()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numberOfTimeouts</h4>
<pre class="methodSignature">public final&nbsp;long&nbsp;numberOfTimeouts()</pre>
<div class="block">Return the number of timeouts registered.
 Note: this is a) expensive and b) an approximation. Should be called only by test code.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of timeouts registered.</dd>
</dl>
</li>
</ul>
<a id="addListener(com.arjuna.ats.arjuna.coordinator.listener.ReaperMonitor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addListener</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;addListener&#8203;(<a href="listener/ReaperMonitor.html" title="interface in com.arjuna.ats.arjuna.coordinator.listener">ReaperMonitor</a>&nbsp;listener)</pre>
</li>
</ul>
<a id="removeListener(com.arjuna.ats.arjuna.coordinator.listener.ReaperMonitor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeListener</h4>
<pre class="methodSignature">public final&nbsp;boolean&nbsp;removeListener&#8203;(<a href="listener/ReaperMonitor.html" title="interface in com.arjuna.ats.arjuna.coordinator.listener">ReaperMonitor</a>&nbsp;listener)</pre>
</li>
</ul>
<a id="insert(com.arjuna.ats.arjuna.coordinator.Reapable,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insert</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;insert&#8203;(<a href="Reapable.html" title="interface in com.arjuna.ats.arjuna.coordinator">Reapable</a>&nbsp;control,
                         int&nbsp;timeout)</pre>
<div class="block">timeout is given in seconds, but we work in milliseconds.

 Attempting to insert an element that is already present is an error (IllegalStateException)</div>
</li>
</ul>
<a id="remove(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;remove&#8203;(java.lang.Object&nbsp;control)</pre>
</li>
</ul>
<a id="getRemainingTimeoutMills(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRemainingTimeoutMills</h4>
<pre class="methodSignature">public final&nbsp;long&nbsp;getRemainingTimeoutMills&#8203;(java.lang.Object&nbsp;control)</pre>
<div class="block">Given the transaction instance, this will return the time left before the
 transaction is automatically rolled back if it has not been terminated.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>control</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the remaining time in milliseconds.</dd>
</dl>
</li>
</ul>
<a id="getTimeout(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTimeout</h4>
<pre class="methodSignature">public final&nbsp;int&nbsp;getTimeout&#8203;(java.lang.Object&nbsp;control)</pre>
<div class="block">Given a Control, return the associated timeout, or 0 if we do not know
 about it.
 
 Return in seconds!

 Takes an Object because TransactionFactoryImple.getTransactionInfo and
 ArjunaTransactionImple.propagationContext use it and don't have a Reapable.</div>
</li>
</ul>
<a id="instantiate()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>instantiate</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;instantiate()</pre>
<div class="block">Currently we let the reaper thread run at same priority as other threads.
 Could get priority from environment.</div>
</li>
</ul>
<a id="transactionReaper()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transactionReaper</h4>
<pre class="methodSignature">public static&nbsp;<a href="TransactionReaper.html" title="class in com.arjuna.ats.arjuna.coordinator">TransactionReaper</a>&nbsp;transactionReaper()</pre>
<div class="block">Starting with 4.8, this method will always return an instance, will never return null.
 This causes the reaper to be instantiated unnecessarily in some cases, but that's cheaper
 than the alternatives.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a TransactionReaper singleton.</dd>
</dl>
</li>
</ul>
<a id="terminate(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>terminate</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;terminate&#8203;(boolean&nbsp;waitForTransactions)</pre>
<div class="block">Terminate the transaction reaper. This is a synchronous operation
 and will only return once the reaper has been shutdown cleanly.
 
 Note, this method assumes that the transaction system has been
 shutdown already so no new transactions can be created, or we
 could be here for a long time!</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>waitForTransactions</code> - if <code>true</code> then the reaper will
                            wait until all transactions have terminated (or been terminated by it).
                            If <code>false</code> then the reaper will call setRollbackOnly on all
                            the transactions.</dd>
</dl>
</li>
</ul>
<a id="isDynamic()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isDynamic</h4>
<pre class="methodSignature">public static&nbsp;boolean&nbsp;isDynamic()</pre>
</li>
</ul>
<a id="transactionLifetime()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>transactionLifetime</h4>
<pre class="methodSignature">public static&nbsp;long&nbsp;transactionLifetime()</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TransactionReaper.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>Narayana: narayana-full 6.0.0.Final</b></div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2023 <a href="http://www.jboss.org">JBoss by Red Hat</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
