<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html" charset="UTF-8"> <title>LockManager (Narayana: narayana-full 5.0.4.Final-SNAPSHOT API)</title> <meta name="date" content="2014-11-19"> <link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style"> </head> <body> <script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="LockManager (Narayana: narayana-full 5.0.4.Final-SNAPSHOT API)";
    }
//-->
</script> <noscript> <div>JavaScript is disabled on your browser.</div> </noscript> <div class="topNav"><a name="navbar_top"> </a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow"> </a> <ul class="navList" title="Navigation"> <li><a href="../../../../overview-summary.html">Overview</a></li> <li><a href="package-summary.html">Package</a></li> <li class="navBarCell1Rev">Class</li> <li><a href="class-use/LockManager.html">Use</a></li> <li><a href="package-tree.html">Tree</a></li> <li><a href="../../../../deprecated-list.html">Deprecated</a></li> <li><a href="../../../../index-all.html">Index</a></li> <li><a href="../../../../help-doc.html">Help</a></li> </ul> <div class="aboutLanguage"><em><b>Narayana: narayana-full 5.0.4.Final-SNAPSHOT</b></em></div> </div> <div class="subNav"> <ul class="navList"> <li><a href="../../../../com/arjuna/ats/txoj/Lock.html" title="class in com.arjuna.ats.txoj"><span class="strong">Prev Class</span></a></li> <li><a href="../../../../com/arjuna/ats/txoj/LockMode.html" title="class in com.arjuna.ats.txoj"><span class="strong">Next Class</span></a></li> </ul> <ul class="navList"> <li><a href="../../../../index.html?com/arjuna/ats/txoj/LockManager.html" target="_top">Frames</a></li> <li><a href="LockManager.html" target="_top">No Frames</a></li> </ul> <ul class="navList" id="allclasses_navbar_top"> <li><a href="../../../../allclasses-noframe.html">All Classes</a></li> </ul> <div> <script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script> </div> <div> <ul class="subNavList"> <li>Summary:&nbsp;</li> <li>Nested&nbsp;|&nbsp;</li> <li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li> <li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li> <li><a href="#method_summary">Method</a></li> </ul> <ul class="subNavList"> <li>Detail:&nbsp;</li> <li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li> <li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li> <li><a href="#method_detail">Method</a></li> </ul> </div> <a name="skip-navbar_top"> </a></div> <div class="header"> <div class="subTitle">com.arjuna.ats.txoj</div> <h2 title="Class LockManager" class="title">Class LockManager</h2> </div> <div class="contentContainer"> <ul class="inheritance"> <li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li> <li> <ul class="inheritance"> <li><a href="../../../../com/arjuna/ats/arjuna/StateManager.html" title="class in com.arjuna.ats.arjuna">com.arjuna.ats.arjuna.StateManager</a></li> <li> <ul class="inheritance"> <li>com.arjuna.ats.txoj.LockManager</li> </ul> </li> </ul> </li> </ul> <div class="description"> <ul class="blockList"> <li class="blockList"> <hr> <br> <pre>public class <span class="strong">LockManager</span>
extends <a href="../../../../com/arjuna/ats/arjuna/StateManager.html" title="class in com.arjuna.ats.arjuna">StateManager</a></pre> <div class="block">This class provides (transactional) concurrency control for application objects.</div> <dl><dt><span class="strong">Since:</span></dt> <dd>JTS 1.0.</dd> <dt><span class="strong">Version:</span></dt> <dd>$Id: LockManager.java 2342 2006-03-30 13:06:17Z $</dd> <dt><span class="strong">Author:</span></dt> <dd>Mark Little (mark@arjuna.com)</dd> <dt><span class="strong">See Also:</span></dt><dd><a href="../../../../com/arjuna/ats/arjuna/StateManager.html" title="class in com.arjuna.ats.arjuna"><code>StateManager</code></a></dd></dl> </li> </ul> </div> <div class="summary"> <ul class="blockList"> <li class="blockList"> <ul class="blockList"> <li class="blockList"><a name="field_summary"> </a> <h3>Field Summary</h3> <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation"> <caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption> <tr> <th class="colFirst" scope="col">Modifier and Type</th> <th class="colLast" scope="col">Field and Description</th> </tr> <tr class="altColor"> <td class="colFirst"><code>protected com.arjuna.ats.internal.txoj.LockConflictManager</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#conflictManager">conflictManager</a></strong></code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>static int</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#defaultRetry">defaultRetry</a></strong></code> <div class="block">The default retry value which will be used by setlock if no other value is given.</div> </td> </tr> <tr class="altColor"> <td class="colFirst"><code>static int</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#defaultSleepTime">defaultSleepTime</a></strong></code> <div class="block">The default timeout value which will be used by setlock if no other value is given.</div> </td> </tr> <tr class="rowColor"> <td class="colFirst"><code>protected static int</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#DOZE_TIME">DOZE_TIME</a></strong></code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>protected boolean</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#hasBeenLocked">hasBeenLocked</a></strong></code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>protected com.arjuna.ats.internal.txoj.LockList</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#locksHeld">locksHeld</a></strong></code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#locksHeldLockObject">locksHeldLockObject</a></strong></code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>protected <a href="../../../../com/arjuna/ats/txoj/lockstore/LockStore.html" title="class in com.arjuna.ats.txoj.lockstore">LockStore</a></code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#lockStore">lockStore</a></strong></code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#lockStoreType">lockStoreType</a></strong></code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html?is-external=true" title="class or interface in java.util.concurrent.locks">ReentrantLock</a></code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#mutex">mutex</a></strong></code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>protected static boolean</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#nestedLocking">nestedLocking</a></strong></code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>protected boolean</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#objectLocked">objectLocked</a></strong></code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>protected boolean</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#stateLoaded">stateLoaded</a></strong></code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#systemKey">systemKey</a></strong></code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>static int</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#waitTotalTimeout">waitTotalTimeout</a></strong></code> <div class="block">By default, threads which call setlock with conflicting locks will spin for the specified (or default) number of timeout and retry attempts, and then return failure if the lock could not be acquired.</div> </td> </tr> </table> <ul class="blockList"> <li class="blockList"><a name="fields_inherited_from_class_com.arjuna.ats.arjuna.StateManager"> </a> <h3>Fields inherited from class&nbsp;com.arjuna.ats.arjuna.<a href="../../../../com/arjuna/ats/arjuna/StateManager.html" title="class in com.arjuna.ats.arjuna">StateManager</a></h3> <code><a href="../../../../com/arjuna/ats/arjuna/StateManager.html#modifyingActions">modifyingActions</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#objectModel">objectModel</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#objectUid">objectUid</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#usingActions">usingActions</a></code></li> </ul> </li> </ul> <ul class="blockList"> <li class="blockList"><a name="constructor_summary"> </a> <h3>Constructor Summary</h3> <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation"> <caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption> <tr> <th class="colFirst" scope="col">Modifier</th> <th class="colLast" scope="col">Constructor and Description</th> </tr> <tr class="altColor"> <td class="colFirst"><code>protected </code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#LockManager()">LockManager</a></strong>()</code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>protected </code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#LockManager(int)">LockManager</a></strong>(int&nbsp;ot)</code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>protected </code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#LockManager(int,%20int)">LockManager</a></strong>(int&nbsp;ot, int&nbsp;om)</code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>protected </code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#LockManager(com.arjuna.ats.arjuna.common.Uid)">LockManager</a></strong>(<a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;storeUid)</code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>protected </code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#LockManager(com.arjuna.ats.arjuna.common.Uid,%20int)">LockManager</a></strong>(<a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;storeUid, int&nbsp;ot)</code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>protected </code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#LockManager(com.arjuna.ats.arjuna.common.Uid,%20int,%20int)">LockManager</a></strong>(<a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;storeUid, int&nbsp;ot, int&nbsp;om)</code>&nbsp;</td> </tr> </table> </li> </ul> <ul class="blockList"> <li class="blockList"><a name="method_summary"> </a> <h3>Method Summary</h3> <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation"> <caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption> <tr> <th class="colFirst" scope="col">Modifier and Type</th> <th class="colLast" scope="col">Method and Description</th> </tr> <tr class="altColor"> <td class="colFirst"><code>protected void</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#cleanUp()">cleanUp</a></strong>()</code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>protected boolean</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#doRelease(com.arjuna.ats.arjuna.common.Uid,%20boolean)">doRelease</a></strong>(<a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;u, boolean&nbsp;all)</code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>void</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#finalize()">finalize</a></strong>()</code> <div class="block">Cleanup.</div> </td> </tr> <tr class="rowColor"> <td class="colFirst"><code>protected void</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#freeState()">freeState</a></strong>()</code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>protected boolean</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#initialise()">initialise</a></strong>()</code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>protected boolean</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#isAncestorOf(com.arjuna.ats.txoj.Lock)">isAncestorOf</a></strong>(<a href="../../../../com/arjuna/ats/txoj/Lock.html" title="class in com.arjuna.ats.txoj">Lock</a>&nbsp;heldLock)</code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>protected boolean</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#loadState()">loadState</a></strong>()</code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>protected int</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#lockConflict(com.arjuna.ats.txoj.Lock)">lockConflict</a></strong>(<a href="../../../../com/arjuna/ats/txoj/Lock.html" title="class in com.arjuna.ats.txoj">Lock</a>&nbsp;otherLock)</code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>void</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#print(java.io.PrintWriter)">print</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html?is-external=true" title="class or interface in java.io">PrintWriter</a>&nbsp;strm)</code> <div class="block">Print information about this instance on the specified <code>PrintWriter</code>.</div> </td> </tr> <tr class="rowColor"> <td class="colFirst"><code>void</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#printState(java.io.PrintWriter)">printState</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html?is-external=true" title="class or interface in java.io">PrintWriter</a>&nbsp;strm)</code> <div class="block">Load state into object prior to doing the printing.</div> </td> </tr> <tr class="altColor"> <td class="colFirst"><code>boolean</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#propagate(com.arjuna.ats.arjuna.common.Uid,%20com.arjuna.ats.arjuna.common.Uid)">propagate</a></strong>(<a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;from, <a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;to)</code> <div class="block">Change lock ownership as nested action commits.</div> </td> </tr> <tr class="rowColor"> <td class="colFirst"><code>boolean</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#releaseAll(com.arjuna.ats.arjuna.common.Uid)">releaseAll</a></strong>(<a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;actionUid)</code> <div class="block">Clear out all locks for a given action.</div> </td> </tr> <tr class="altColor"> <td class="colFirst"><code>boolean</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#releaselock(com.arjuna.ats.arjuna.common.Uid)">releaselock</a></strong>(<a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;lockUid)</code> <div class="block">Release a SINGLE LOCK lock that has the given uid.</div> </td> </tr> <tr class="rowColor"> <td class="colFirst"><code>int</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#setlock(com.arjuna.ats.txoj.Lock)">setlock</a></strong>(<a href="../../../../com/arjuna/ats/txoj/Lock.html" title="class in com.arjuna.ats.txoj">Lock</a>&nbsp;toSet)</code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>int</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#setlock(com.arjuna.ats.txoj.Lock,%20int)">setlock</a></strong>(<a href="../../../../com/arjuna/ats/txoj/Lock.html" title="class in com.arjuna.ats.txoj">Lock</a>&nbsp;toSet, int&nbsp;retry)</code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>int</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#setlock(com.arjuna.ats.txoj.Lock,%20int,%20int)">setlock</a></strong>(<a href="../../../../com/arjuna/ats/txoj/Lock.html" title="class in com.arjuna.ats.txoj">Lock</a>&nbsp;toSet, int&nbsp;retry, int&nbsp;sleepTime)</code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>protected void</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#terminate()">terminate</a></strong>()</code> <div class="block">This method *must* be called in the finalizer of every object.</div> </td> </tr> <tr class="rowColor"> <td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#type()">type</a></strong>()</code> <div class="block">Overload StateManager.type()</div> </td> </tr> <tr class="altColor"> <td class="colFirst"><code>protected boolean</code></td> <td class="colLast"><code><strong><a href="../../../../com/arjuna/ats/txoj/LockManager.html#unloadState()">unloadState</a></strong>()</code>&nbsp;</td> </tr> </table> <ul class="blockList"> <li class="blockList"><a name="methods_inherited_from_class_com.arjuna.ats.arjuna.StateManager"> </a> <h3>Methods inherited from class&nbsp;com.arjuna.ats.arjuna.<a href="../../../../com/arjuna/ats/arjuna/StateManager.html" title="class in com.arjuna.ats.arjuna">StateManager</a></h3> <code><a href="../../../../com/arjuna/ats/arjuna/StateManager.html#activate()">activate</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#activate(java.lang.String)">activate</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#cleanup(boolean)">cleanup</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#createLists()">createLists</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#deactivate()">deactivate</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#deactivate(java.lang.String)">deactivate</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#deactivate(java.lang.String,%20boolean)">deactivate</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#destroy()">destroy</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#disable()">disable</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#forgetAction(com.arjuna.ats.arjuna.coordinator.BasicAction,%20boolean,%20int)">forgetAction</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#get_uid()">get_uid</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#getMutex()">getMutex</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#getObjectModel()">getObjectModel</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#getStore()">getStore</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#getStoreRoot()">getStoreRoot</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#loadObjectState()">loadObjectState</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#lockMutex()">lockMutex</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#modified()">modified</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#objectType()">objectType</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#packHeader(com.arjuna.ats.arjuna.state.OutputObjectState,%20com.arjuna.ats.internal.arjuna.Header)">packHeader</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#persist()">persist</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#rememberAction(com.arjuna.ats.arjuna.coordinator.BasicAction,%20int,%20int)">rememberAction</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#restore_state(com.arjuna.ats.arjuna.state.InputObjectState,%20int)">restore_state</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#save_state(com.arjuna.ats.arjuna.state.OutputObjectState,%20int)">save_state</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#setStatus(int)">setStatus</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#setupStore()">setupStore</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#setupStore(java.lang.String)">setupStore</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#setupStore(java.lang.String,%20java.lang.String)">setupStore</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#status()">status</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#tryLockMutex()">tryLockMutex</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#unlockMutex()">unlockMutex</a>, <a href="../../../../com/arjuna/ats/arjuna/StateManager.html#unpackHeader(com.arjuna.ats.arjuna.state.InputObjectState,%20com.arjuna.ats.internal.arjuna.Header)">unpackHeader</a></code></li> </ul> <ul class="blockList"> <li class="blockList"><a name="methods_inherited_from_class_java.lang.Object"> </a> <h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3> <code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li> </ul> </li> </ul> </li> </ul> </div> <div class="details"> <ul class="blockList"> <li class="blockList"> <ul class="blockList"> <li class="blockList"><a name="field_detail"> </a> <h3>Field Detail</h3> <a name="defaultRetry"> </a> <ul class="blockList"> <li class="blockList"> <h4>defaultRetry</h4> <pre>public static final&nbsp;int defaultRetry</pre> <div class="block">The default retry value which will be used by setlock if no other value is given.</div> <dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../com/arjuna/ats/txoj/LockManager.html#setlock(com.arjuna.ats.txoj.Lock)"><code>setlock(com.arjuna.ats.txoj.Lock)</code></a>, <a href="../../../../constant-values.html#com.arjuna.ats.txoj.LockManager.defaultRetry">Constant Field Values</a></dd></dl> </li> </ul> <a name="defaultSleepTime"> </a> <ul class="blockList"> <li class="blockList"> <h4>defaultSleepTime</h4> <pre>public static final&nbsp;int defaultSleepTime</pre> <div class="block">The default timeout value which will be used by setlock if no other value is given. Milliseconds.</div> <dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../com/arjuna/ats/txoj/LockManager.html#setlock(com.arjuna.ats.txoj.Lock)"><code>setlock(com.arjuna.ats.txoj.Lock)</code></a>, <a href="../../../../constant-values.html#com.arjuna.ats.txoj.LockManager.defaultSleepTime">Constant Field Values</a></dd></dl> </li> </ul> <a name="waitTotalTimeout"> </a> <ul class="blockList"> <li class="blockList"> <h4>waitTotalTimeout</h4> <pre>public static final&nbsp;int waitTotalTimeout</pre> <div class="block">By default, threads which call setlock with conflicting locks will spin for the specified (or default) number of timeout and retry attempts, and then return failure if the lock could not be acquired. If the *retry* period is set to this value, then such threads will sleep for their total wait period and be signalled if the lock is released within this period of time.</div> <dl><dt><span class="strong">Since:</span></dt> <dd>JTS 2.1.</dd> <dt><span class="strong">See Also:</span></dt><dd><a href="../../../../com/arjuna/ats/txoj/LockManager.html#setlock(com.arjuna.ats.txoj.Lock)"><code>setlock(com.arjuna.ats.txoj.Lock)</code></a>, <a href="../../../../constant-values.html#com.arjuna.ats.txoj.LockManager.waitTotalTimeout">Constant Field Values</a></dd></dl> </li> </ul> <a name="lockStoreType"> </a> <ul class="blockList"> <li class="blockList"> <h4>lockStoreType</h4> <pre>protected&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> lockStoreType</pre> </li> </ul> <a name="systemKey"> </a> <ul class="blockList"> <li class="blockList"> <h4>systemKey</h4> <pre>protected&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> systemKey</pre> </li> </ul> <a name="locksHeld"> </a> <ul class="blockList"> <li class="blockList"> <h4>locksHeld</h4> <pre>protected&nbsp;com.arjuna.ats.internal.txoj.LockList locksHeld</pre> </li> </ul> <a name="locksHeldLockObject"> </a> <ul class="blockList"> <li class="blockList"> <h4>locksHeldLockObject</h4> <pre>protected final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a> locksHeldLockObject</pre> </li> </ul> <a name="lockStore"> </a> <ul class="blockList"> <li class="blockList"> <h4>lockStore</h4> <pre>protected&nbsp;<a href="../../../../com/arjuna/ats/txoj/lockstore/LockStore.html" title="class in com.arjuna.ats.txoj.lockstore">LockStore</a> lockStore</pre> </li> </ul> <a name="stateLoaded"> </a> <ul class="blockList"> <li class="blockList"> <h4>stateLoaded</h4> <pre>protected&nbsp;boolean stateLoaded</pre> </li> </ul> <a name="hasBeenLocked"> </a> <ul class="blockList"> <li class="blockList"> <h4>hasBeenLocked</h4> <pre>protected&nbsp;boolean hasBeenLocked</pre> </li> </ul> <a name="objectLocked"> </a> <ul class="blockList"> <li class="blockList"> <h4>objectLocked</h4> <pre>protected&nbsp;boolean objectLocked</pre> </li> </ul> <a name="mutex"> </a> <ul class="blockList"> <li class="blockList"> <h4>mutex</h4> <pre>protected&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html?is-external=true" title="class or interface in java.util.concurrent.locks">ReentrantLock</a> mutex</pre> </li> </ul> <a name="conflictManager"> </a> <ul class="blockList"> <li class="blockList"> <h4>conflictManager</h4> <pre>protected&nbsp;com.arjuna.ats.internal.txoj.LockConflictManager conflictManager</pre> </li> </ul> <a name="DOZE_TIME"> </a> <ul class="blockList"> <li class="blockList"> <h4>DOZE_TIME</h4> <pre>protected static final&nbsp;int DOZE_TIME</pre> <dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#com.arjuna.ats.txoj.LockManager.DOZE_TIME">Constant Field Values</a></dd></dl> </li> </ul> <a name="nestedLocking"> </a> <ul class="blockListLast"> <li class="blockList"> <h4>nestedLocking</h4> <pre>protected static final&nbsp;boolean nestedLocking</pre> </li> </ul> </li> </ul> <ul class="blockList"> <li class="blockList"><a name="constructor_detail"> </a> <h3>Constructor Detail</h3> <a name="LockManager(com.arjuna.ats.arjuna.common.Uid)"> </a> <ul class="blockList"> <li class="blockList"> <h4>LockManager</h4> <pre>protected&nbsp;LockManager(<a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;storeUid)</pre> </li> </ul> <a name="LockManager(com.arjuna.ats.arjuna.common.Uid, int)"> </a> <ul class="blockList"> <li class="blockList"> <h4>LockManager</h4> <pre>protected&nbsp;LockManager(<a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;storeUid,
           int&nbsp;ot)</pre> </li> </ul> <a name="LockManager(com.arjuna.ats.arjuna.common.Uid, int, int)"> </a> <ul class="blockList"> <li class="blockList"> <h4>LockManager</h4> <pre>protected&nbsp;LockManager(<a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;storeUid,
           int&nbsp;ot,
           int&nbsp;om)</pre> </li> </ul> <a name="LockManager()"> </a> <ul class="blockList"> <li class="blockList"> <h4>LockManager</h4> <pre>protected&nbsp;LockManager()</pre> </li> </ul> <a name="LockManager(int)"> </a> <ul class="blockList"> <li class="blockList"> <h4>LockManager</h4> <pre>protected&nbsp;LockManager(int&nbsp;ot)</pre> </li> </ul> <a name="LockManager(int, int)"> </a> <ul class="blockListLast"> <li class="blockList"> <h4>LockManager</h4> <pre>protected&nbsp;LockManager(int&nbsp;ot,
           int&nbsp;om)</pre> </li> </ul> </li> </ul> <ul class="blockList"> <li class="blockList"><a name="method_detail"> </a> <h3>Method Detail</h3> <a name="finalize()"> </a> <ul class="blockList"> <li class="blockList"> <h4>finalize</h4> <pre>public&nbsp;void&nbsp;finalize()
              throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a></pre> <div class="block">Cleanup. Note we grab the semaphore before destroying the lock store to ensure the store is deleted cleanly.</div> <dl> <dt><strong>Overrides:</strong></dt> <dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd> <dt><span class="strong">Throws:</span></dt> <dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a></code></dd></dl> </li> </ul> <a name="propagate(com.arjuna.ats.arjuna.common.Uid, com.arjuna.ats.arjuna.common.Uid)"> </a> <ul class="blockList"> <li class="blockList"> <h4>propagate</h4> <pre>public&nbsp;boolean&nbsp;propagate(<a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;from,
                <a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;to)</pre> <div class="block">Change lock ownership as nested action commits. All locks owned by the committing action have their owners changed to be the parent of the committing action. BasicAction ensures this is only called at nested commit. This function works by copying the old LockList pointer and then creating a new held lock list. Locks are then moved from the old to the new, propagating en route.</div> </li> </ul> <a name="releaseAll(com.arjuna.ats.arjuna.common.Uid)"> </a> <ul class="blockList"> <li class="blockList"> <h4>releaseAll</h4> <pre>public final&nbsp;boolean&nbsp;releaseAll(<a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;actionUid)</pre> <div class="block">Clear out all locks for a given action. Should be triggered automatically at top-level commit but is also user callable so is potentially dangerous.</div> </li> </ul> <a name="releaselock(com.arjuna.ats.arjuna.common.Uid)"> </a> <ul class="blockList"> <li class="blockList"> <h4>releaselock</h4> <pre>public final&nbsp;boolean&nbsp;releaselock(<a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;lockUid)</pre> <div class="block">Release a SINGLE LOCK lock that has the given uid. Breaks two-phase locking rules so watch out!</div> </li> </ul> <a name="setlock(com.arjuna.ats.txoj.Lock)"> </a> <ul class="blockList"> <li class="blockList"> <h4>setlock</h4> <pre>public final&nbsp;int&nbsp;setlock(<a href="../../../../com/arjuna/ats/txoj/Lock.html" title="class in com.arjuna.ats.txoj">Lock</a>&nbsp;toSet)</pre> </li> </ul> <a name="setlock(com.arjuna.ats.txoj.Lock, int)"> </a> <ul class="blockList"> <li class="blockList"> <h4>setlock</h4> <pre>public final&nbsp;int&nbsp;setlock(<a href="../../../../com/arjuna/ats/txoj/Lock.html" title="class in com.arjuna.ats.txoj">Lock</a>&nbsp;toSet,
          int&nbsp;retry)</pre> </li> </ul> <a name="setlock(com.arjuna.ats.txoj.Lock, int, int)"> </a> <ul class="blockList"> <li class="blockList"> <h4>setlock</h4> <pre>public&nbsp;int&nbsp;setlock(<a href="../../../../com/arjuna/ats/txoj/Lock.html" title="class in com.arjuna.ats.txoj">Lock</a>&nbsp;toSet,
          int&nbsp;retry,
          int&nbsp;sleepTime)</pre> </li> </ul> <a name="print(java.io.PrintWriter)"> </a> <ul class="blockList"> <li class="blockList"> <h4>print</h4> <pre>public&nbsp;void&nbsp;print(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html?is-external=true" title="class or interface in java.io">PrintWriter</a>&nbsp;strm)</pre> <div class="block">Print information about this instance on the specified <code>PrintWriter</code>.</div> <dl> <dt><strong>Overrides:</strong></dt> <dd><code><a href="../../../../com/arjuna/ats/arjuna/StateManager.html#print(java.io.PrintWriter)">print</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/arjuna/ats/arjuna/StateManager.html" title="class in com.arjuna.ats.arjuna">StateManager</a></code></dd> </dl> </li> </ul> <a name="printState(java.io.PrintWriter)"> </a> <ul class="blockList"> <li class="blockList"> <h4>printState</h4> <pre>public&nbsp;void&nbsp;printState(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html?is-external=true" title="class or interface in java.io">PrintWriter</a>&nbsp;strm)</pre> <div class="block">Load state into object prior to doing the printing.</div> </li> </ul> <a name="type()"> </a> <ul class="blockList"> <li class="blockList"> <h4>type</h4> <pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;type()</pre> <div class="block">Overload StateManager.type()</div> <dl> <dt><strong>Overrides:</strong></dt> <dd><code><a href="../../../../com/arjuna/ats/arjuna/StateManager.html#type()">type</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/arjuna/ats/arjuna/StateManager.html" title="class in com.arjuna.ats.arjuna">StateManager</a></code></dd> </dl> </li> </ul> <a name="terminate()"> </a> <ul class="blockList"> <li class="blockList"> <h4>terminate</h4> <pre>protected&nbsp;void&nbsp;terminate()</pre> <div class="block">This method *must* be called in the finalizer of every object. It ensures that any necessary cleanup work is done in the event that the object goes out of scope within a transaction.</div> <dl> <dt><strong>Overrides:</strong></dt> <dd><code><a href="../../../../com/arjuna/ats/arjuna/StateManager.html#terminate()">terminate</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/arjuna/ats/arjuna/StateManager.html" title="class in com.arjuna.ats.arjuna">StateManager</a></code></dd> </dl> </li> </ul> <a name="cleanUp()"> </a> <ul class="blockList"> <li class="blockList"> <h4>cleanUp</h4> <pre>protected final&nbsp;void&nbsp;cleanUp()</pre> </li> </ul> <a name="doRelease(com.arjuna.ats.arjuna.common.Uid, boolean)"> </a> <ul class="blockList"> <li class="blockList"> <h4>doRelease</h4> <pre>protected&nbsp;boolean&nbsp;doRelease(<a href="../../../../com/arjuna/ats/arjuna/common/Uid.html" title="class in com.arjuna.ats.arjuna.common">Uid</a>&nbsp;u,
                boolean&nbsp;all)</pre> </li> </ul> <a name="freeState()"> </a> <ul class="blockList"> <li class="blockList"> <h4>freeState</h4> <pre>protected final&nbsp;void&nbsp;freeState()</pre> </li> </ul> <a name="initialise()"> </a> <ul class="blockList"> <li class="blockList"> <h4>initialise</h4> <pre>protected final&nbsp;boolean&nbsp;initialise()</pre> </li> </ul> <a name="isAncestorOf(com.arjuna.ats.txoj.Lock)"> </a> <ul class="blockList"> <li class="blockList"> <h4>isAncestorOf</h4> <pre>protected final&nbsp;boolean&nbsp;isAncestorOf(<a href="../../../../com/arjuna/ats/txoj/Lock.html" title="class in com.arjuna.ats.txoj">Lock</a>&nbsp;heldLock)</pre> </li> </ul> <a name="loadState()"> </a> <ul class="blockList"> <li class="blockList"> <h4>loadState</h4> <pre>protected final&nbsp;boolean&nbsp;loadState()</pre> </li> </ul> <a name="lockConflict(com.arjuna.ats.txoj.Lock)"> </a> <ul class="blockList"> <li class="blockList"> <h4>lockConflict</h4> <pre>protected final&nbsp;int&nbsp;lockConflict(<a href="../../../../com/arjuna/ats/txoj/Lock.html" title="class in com.arjuna.ats.txoj">Lock</a>&nbsp;otherLock)</pre> </li> </ul> <a name="unloadState()"> </a> <ul class="blockListLast"> <li class="blockList"> <h4>unloadState</h4> <pre>protected final&nbsp;boolean&nbsp;unloadState()</pre> </li> </ul> </li> </ul> </li> </ul> </div> </div> <div class="bottomNav"><a name="navbar_bottom"> </a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow"> </a> <ul class="navList" title="Navigation"> <li><a href="../../../../overview-summary.html">Overview</a></li> <li><a href="package-summary.html">Package</a></li> <li class="navBarCell1Rev">Class</li> <li><a href="class-use/LockManager.html">Use</a></li> <li><a href="package-tree.html">Tree</a></li> <li><a href="../../../../deprecated-list.html">Deprecated</a></li> <li><a href="../../../../index-all.html">Index</a></li> <li><a href="../../../../help-doc.html">Help</a></li> </ul> <div class="aboutLanguage"><em><b>Narayana: narayana-full 5.0.4.Final-SNAPSHOT</b></em></div> </div> <div class="subNav"> <ul class="navList"> <li><a href="../../../../com/arjuna/ats/txoj/Lock.html" title="class in com.arjuna.ats.txoj"><span class="strong">Prev Class</span></a></li> <li><a href="../../../../com/arjuna/ats/txoj/LockMode.html" title="class in com.arjuna.ats.txoj"><span class="strong">Next Class</span></a></li> </ul> <ul class="navList"> <li><a href="../../../../index.html?com/arjuna/ats/txoj/LockManager.html" target="_top">Frames</a></li> <li><a href="LockManager.html" target="_top">No Frames</a></li> </ul> <ul class="navList" id="allclasses_navbar_bottom"> <li><a href="../../../../allclasses-noframe.html">All Classes</a></li> </ul> <div> <script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script> </div> <div> <ul class="subNavList"> <li>Summary:&nbsp;</li> <li>Nested&nbsp;|&nbsp;</li> <li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li> <li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li> <li><a href="#method_summary">Method</a></li> </ul> <ul class="subNavList"> <li>Detail:&nbsp;</li> <li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li> <li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li> <li><a href="#method_detail">Method</a></li> </ul> </div> <a name="skip-navbar_bottom"> </a></div> <p class="legalCopy"><small>Copyright &#169; 2014 <a href="http://www.jboss.org">JBoss by Red Hat</a>. All Rights Reserved.</small></p> </body> </html>