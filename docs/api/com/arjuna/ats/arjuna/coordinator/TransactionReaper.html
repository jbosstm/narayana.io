<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html" charset="UTF-8"> <title>TransactionReaper (Narayana: narayana-full 5.0.4.Final-SNAPSHOT API)</title> <meta name="date" content="2014-11-19"> <link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style"> </head> <body> <script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TransactionReaper (Narayana: narayana-full 5.0.4.Final-SNAPSHOT API)";
    }
//-->
</script> <noscript> <div>JavaScript is disabled on your browser.</div> </noscript> <div class="topNav"><a name="navbar_top"> </a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow"> </a> <ul class="navList" title="Navigation"> <li><a href="../../../../../overview-summary.html">Overview</a></li> <li><a href="package-summary.html">Package</a></li> <li class="navBarCell1Rev">Class</li> <li><a href="class-use/TransactionReaper.html">Use</a></li> <li><a href="package-tree.html">Tree</a></li> <li><a href="../../../../../deprecated-list.html">Deprecated</a></li> <li><a href="../../../../../index-all.html">Index</a></li> <li><a href="../../../../../help-doc.html">Help</a></li> </ul> <div class="aboutLanguage"><em><b>Narayana: narayana-full 5.0.4.Final-SNAPSHOT</b></em></div> </div> <div class="subNav"> <ul class="navList"> <li><a href="../../../../../com/arjuna/ats/arjuna/coordinator/SynchronizationRecord.html" title="interface in com.arjuna.ats.arjuna.coordinator"><span class="strong">Prev Class</span></a></li> <li><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TwoPhaseCommitThreadPool.html" title="class in com.arjuna.ats.arjuna.coordinator"><span class="strong">Next Class</span></a></li> </ul> <ul class="navList"> <li><a href="../../../../../index.html?com/arjuna/ats/arjuna/coordinator/TransactionReaper.html" target="_top">Frames</a></li> <li><a href="TransactionReaper.html" target="_top">No Frames</a></li> </ul> <ul class="navList" id="allclasses_navbar_top"> <li><a href="../../../../../allclasses-noframe.html">All Classes</a></li> </ul> <div> <script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script> </div> <div> <ul class="subNavList"> <li>Summary:&nbsp;</li> <li>Nested&nbsp;|&nbsp;</li> <li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li> <li>Constr&nbsp;|&nbsp;</li> <li><a href="#method_summary">Method</a></li> </ul> <ul class="subNavList"> <li>Detail:&nbsp;</li> <li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li> <li>Constr&nbsp;|&nbsp;</li> <li><a href="#method_detail">Method</a></li> </ul> </div> <a name="skip-navbar_top"> </a></div> <div class="header"> <div class="subTitle">com.arjuna.ats.arjuna.coordinator</div> <h2 title="Class TransactionReaper" class="title">Class TransactionReaper</h2> </div> <div class="contentContainer"> <ul class="inheritance"> <li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li> <li> <ul class="inheritance"> <li>com.arjuna.ats.arjuna.coordinator.TransactionReaper</li> </ul> </li> </ul> <div class="description"> <ul class="blockList"> <li class="blockList"> <hr> <br> <pre>public class <span class="strong">TransactionReaper</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre> <div class="block">Class to record transactions with non-zero timeout values, and class to implement a transaction reaper thread which terminates these transactions once their timeout elapses.</div> <dl><dt><span class="strong">Since:</span></dt> <dd>JTS 1.0.</dd> <dt><span class="strong">Version:</span></dt> <dd>$Id: TransactionReaper.java 2342 2006-03-30 13:06:17Z $</dd> <dt><span class="strong">Author:</span></dt> <dd>Mark Little (mark@arjuna.com)</dd></dl> </li> </ul> </div> <div class="summary"> <ul class="blockList"> <li class="blockList"> <ul class="blockList"> <li class="blockList"><a name="field_summary"> </a> <h3>Field Summary</h3> <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation"> <caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption> <tr> <th class="colFirst" scope="col">Modifier and Type</th> <th class="colLast" scope="col">Field and Description</th> </tr> <tr class="altColor"> <td class="colFirst"><code>static long</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#defaultCancelFailWaitPeriod">defaultCancelFailWaitPeriod</a></strong></code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>static long</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#defaultCancelWaitPeriod">defaultCancelWaitPeriod</a></strong></code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>static long</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#defaultCheckPeriod">defaultCheckPeriod</a></strong></code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>static int</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#defaultZombieMax">defaultZombieMax</a></strong></code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#DYNAMIC">DYNAMIC</a></strong></code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#NORMAL">NORMAL</a></strong></code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#PERIODIC">PERIODIC</a></strong></code>&nbsp;</td> </tr> </table> </li> </ul> <ul class="blockList"> <li class="blockList"><a name="method_summary"> </a> <h3>Method Summary</h3> <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation"> <caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption> <tr> <th class="colFirst" scope="col">Modifier and Type</th> <th class="colLast" scope="col">Method and Description</th> </tr> <tr class="altColor"> <td class="colFirst"><code>void</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#addListener(com.arjuna.ats.arjuna.coordinator.listener.ReaperMonitor)">addListener</a></strong>(<a href="../../../../../com/arjuna/ats/arjuna/coordinator/listener/ReaperMonitor.html" title="interface in com.arjuna.ats.arjuna.coordinator.listener">ReaperMonitor</a>&nbsp;listener)</code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>void</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#check()">check</a></strong>()</code> <div class="block">process all entries in the timeout queue which have expired.</div> </td> </tr> <tr class="altColor"> <td class="colFirst"><code>long</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#checkingPeriod()">checkingPeriod</a></strong>()</code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>void</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#doCancellations()">doCancellations</a></strong>()</code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>long</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#getRemainingTimeoutMills(java.lang.Object)">getRemainingTimeoutMills</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;control)</code> <div class="block">Given the transaction instance, this will return the time left before the transaction is automatically rolled back if it has not been terminated.</div> </td> </tr> <tr class="rowColor"> <td class="colFirst"><code>int</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#getTimeout(java.lang.Object)">getTimeout</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;control)</code> <div class="block">Given a Control, return the associated timeout, or 0 if we do not know about it.</div> </td> </tr> <tr class="altColor"> <td class="colFirst"><code>void</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#insert(com.arjuna.ats.arjuna.coordinator.Reapable,%20int)">insert</a></strong>(<a href="../../../../../com/arjuna/ats/arjuna/coordinator/Reapable.html" title="interface in com.arjuna.ats.arjuna.coordinator">Reapable</a>&nbsp;control, int&nbsp;timeout)</code> <div class="block">timeout is given in seconds, but we work in milliseconds.</div> </td> </tr> <tr class="rowColor"> <td class="colFirst"><code>static void</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#instantiate()">instantiate</a></strong>()</code> <div class="block">Currently we let the reaper thread run at same priority as other threads.</div> </td> </tr> <tr class="altColor"> <td class="colFirst"><code>static boolean</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#isDynamic()">isDynamic</a></strong>()</code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>long</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#numberOfTimeouts()">numberOfTimeouts</a></strong>()</code> <div class="block">Return the number of timeouts registered.</div> </td> </tr> <tr class="altColor"> <td class="colFirst"><code>long</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#numberOfTransactions()">numberOfTransactions</a></strong>()</code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>void</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#remove(java.lang.Object)">remove</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;control)</code>&nbsp;</td> </tr> <tr class="altColor"> <td class="colFirst"><code>boolean</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#removeListener(com.arjuna.ats.arjuna.coordinator.listener.ReaperMonitor)">removeListener</a></strong>(<a href="../../../../../com/arjuna/ats/arjuna/coordinator/listener/ReaperMonitor.html" title="interface in com.arjuna.ats.arjuna.coordinator.listener">ReaperMonitor</a>&nbsp;listener)</code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>static void</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#terminate(boolean)">terminate</a></strong>(boolean&nbsp;waitForTransactions)</code> <div class="block">Terminate the transaction reaper.</div> </td> </tr> <tr class="altColor"> <td class="colFirst"><code>static long</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#transactionLifetime()">transactionLifetime</a></strong>()</code>&nbsp;</td> </tr> <tr class="rowColor"> <td class="colFirst"><code>static <a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html" title="class in com.arjuna.ats.arjuna.coordinator">TransactionReaper</a></code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#transactionReaper()">transactionReaper</a></strong>()</code> <div class="block">Starting with 4.8, this method will always return an instance, will never return null.</div> </td> </tr> <tr class="altColor"> <td class="colFirst"><code>void</code></td> <td class="colLast"><code><strong><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html#waitForCancellations()">waitForCancellations</a></strong>()</code>&nbsp;</td> </tr> </table> <ul class="blockList"> <li class="blockList"><a name="methods_inherited_from_class_java.lang.Object"> </a> <h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3> <code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li> </ul> </li> </ul> </li> </ul> </div> <div class="details"> <ul class="blockList"> <li class="blockList"> <ul class="blockList"> <li class="blockList"><a name="field_detail"> </a> <h3>Field Detail</h3> <a name="NORMAL"> </a> <ul class="blockList"> <li class="blockList"> <h4>NORMAL</h4> <pre>public static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> NORMAL</pre> <dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.NORMAL">Constant Field Values</a></dd></dl> </li> </ul> <a name="DYNAMIC"> </a> <ul class="blockList"> <li class="blockList"> <h4>DYNAMIC</h4> <pre>public static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> DYNAMIC</pre> <dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.DYNAMIC">Constant Field Values</a></dd></dl> </li> </ul> <a name="PERIODIC"> </a> <ul class="blockList"> <li class="blockList"> <h4>PERIODIC</h4> <pre>public static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> PERIODIC</pre> <dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.PERIODIC">Constant Field Values</a></dd></dl> </li> </ul> <a name="defaultCheckPeriod"> </a> <ul class="blockList"> <li class="blockList"> <h4>defaultCheckPeriod</h4> <pre>public static final&nbsp;long defaultCheckPeriod</pre> <dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.defaultCheckPeriod">Constant Field Values</a></dd></dl> </li> </ul> <a name="defaultCancelWaitPeriod"> </a> <ul class="blockList"> <li class="blockList"> <h4>defaultCancelWaitPeriod</h4> <pre>public static final&nbsp;long defaultCancelWaitPeriod</pre> <dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.defaultCancelWaitPeriod">Constant Field Values</a></dd></dl> </li> </ul> <a name="defaultCancelFailWaitPeriod"> </a> <ul class="blockList"> <li class="blockList"> <h4>defaultCancelFailWaitPeriod</h4> <pre>public static final&nbsp;long defaultCancelFailWaitPeriod</pre> <dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.defaultCancelFailWaitPeriod">Constant Field Values</a></dd></dl> </li> </ul> <a name="defaultZombieMax"> </a> <ul class="blockListLast"> <li class="blockList"> <h4>defaultZombieMax</h4> <pre>public static final&nbsp;int defaultZombieMax</pre> <dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#com.arjuna.ats.arjuna.coordinator.TransactionReaper.defaultZombieMax">Constant Field Values</a></dd></dl> </li> </ul> </li> </ul> <ul class="blockList"> <li class="blockList"><a name="method_detail"> </a> <h3>Method Detail</h3> <a name="checkingPeriod()"> </a> <ul class="blockList"> <li class="blockList"> <h4>checkingPeriod</h4> <pre>public final&nbsp;long&nbsp;checkingPeriod()</pre> </li> </ul> <a name="check()"> </a> <ul class="blockList"> <li class="blockList"> <h4>check</h4> <pre>public final&nbsp;void&nbsp;check()</pre> <div class="block">process all entries in the timeout queue which have expired. entries for newly expired transactions are passed to a worker thread for cancellation and requeued for subsequent progress checks. the worker is given a kick if such checks find it is wedged. <p/> Timeout is given in milliseconds.</div> </li> </ul> <a name="waitForCancellations()"> </a> <ul class="blockList"> <li class="blockList"> <h4>waitForCancellations</h4> <pre>public final&nbsp;void&nbsp;waitForCancellations()</pre> </li> </ul> <a name="doCancellations()"> </a> <ul class="blockList"> <li class="blockList"> <h4>doCancellations</h4> <pre>public final&nbsp;void&nbsp;doCancellations()</pre> </li> </ul> <a name="numberOfTransactions()"> </a> <ul class="blockList"> <li class="blockList"> <h4>numberOfTransactions</h4> <pre>public final&nbsp;long&nbsp;numberOfTransactions()</pre> <dl><dt><span class="strong">Returns:</span></dt><dd>the number of items in the reaper's list.</dd><dt><span class="strong">Since:</span></dt> <dd>JTS 2.2. Note: this is a) expensive and b) an approximation. Should be called only by test code.</dd></dl> </li> </ul> <a name="numberOfTimeouts()"> </a> <ul class="blockList"> <li class="blockList"> <h4>numberOfTimeouts</h4> <pre>public final&nbsp;long&nbsp;numberOfTimeouts()</pre> <div class="block">Return the number of timeouts registered. Note: this is a) expensive and b) an approximation. Should be called only by test code.</div> <dl><dt><span class="strong">Returns:</span></dt><dd>The number of timeouts registered.</dd></dl> </li> </ul> <a name="addListener(com.arjuna.ats.arjuna.coordinator.listener.ReaperMonitor)"> </a> <ul class="blockList"> <li class="blockList"> <h4>addListener</h4> <pre>public final&nbsp;void&nbsp;addListener(<a href="../../../../../com/arjuna/ats/arjuna/coordinator/listener/ReaperMonitor.html" title="interface in com.arjuna.ats.arjuna.coordinator.listener">ReaperMonitor</a>&nbsp;listener)</pre> </li> </ul> <a name="removeListener(com.arjuna.ats.arjuna.coordinator.listener.ReaperMonitor)"> </a> <ul class="blockList"> <li class="blockList"> <h4>removeListener</h4> <pre>public final&nbsp;boolean&nbsp;removeListener(<a href="../../../../../com/arjuna/ats/arjuna/coordinator/listener/ReaperMonitor.html" title="interface in com.arjuna.ats.arjuna.coordinator.listener">ReaperMonitor</a>&nbsp;listener)</pre> </li> </ul> <a name="insert(com.arjuna.ats.arjuna.coordinator.Reapable, int)"> </a> <ul class="blockList"> <li class="blockList"> <h4>insert</h4> <pre>public final&nbsp;void&nbsp;insert(<a href="../../../../../com/arjuna/ats/arjuna/coordinator/Reapable.html" title="interface in com.arjuna.ats.arjuna.coordinator">Reapable</a>&nbsp;control,
          int&nbsp;timeout)</pre> <div class="block">timeout is given in seconds, but we work in milliseconds. Attempting to insert an element that is already present is an error (IllegalStateException)</div> </li> </ul> <a name="remove(java.lang.Object)"> </a> <ul class="blockList"> <li class="blockList"> <h4>remove</h4> <pre>public final&nbsp;void&nbsp;remove(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;control)</pre> </li> </ul> <a name="getRemainingTimeoutMills(java.lang.Object)"> </a> <ul class="blockList"> <li class="blockList"> <h4>getRemainingTimeoutMills</h4> <pre>public final&nbsp;long&nbsp;getRemainingTimeoutMills(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;control)</pre> <div class="block">Given the transaction instance, this will return the time left before the transaction is automatically rolled back if it has not been terminated.</div> <dl><dt><span class="strong">Parameters:</span></dt><dd><code>control</code> - </dd> <dt><span class="strong">Returns:</span></dt><dd>the remaining time in milliseconds.</dd></dl> </li> </ul> <a name="getTimeout(java.lang.Object)"> </a> <ul class="blockList"> <li class="blockList"> <h4>getTimeout</h4> <pre>public final&nbsp;int&nbsp;getTimeout(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;control)</pre> <div class="block">Given a Control, return the associated timeout, or 0 if we do not know about it. <p/> Return in seconds! Takes an Object because TransactionFactoryImple.getTransactionInfo and ArjunaTransactionImple.propagationContext use it and don't have a Reapable.</div> </li> </ul> <a name="instantiate()"> </a> <ul class="blockList"> <li class="blockList"> <h4>instantiate</h4> <pre>public static&nbsp;void&nbsp;instantiate()</pre> <div class="block">Currently we let the reaper thread run at same priority as other threads. Could get priority from environment.</div> </li> </ul> <a name="transactionReaper()"> </a> <ul class="blockList"> <li class="blockList"> <h4>transactionReaper</h4> <pre>public static&nbsp;<a href="../../../../../com/arjuna/ats/arjuna/coordinator/TransactionReaper.html" title="class in com.arjuna.ats.arjuna.coordinator">TransactionReaper</a>&nbsp;transactionReaper()</pre> <div class="block">Starting with 4.8, this method will always return an instance, will never return null. This causes the reaper to be instantiated unnecessarily in some cases, but that's cheaper than the alternatives.</div> <dl><dt><span class="strong">Returns:</span></dt><dd>a TransactionReaper singleton.</dd></dl> </li> </ul> <a name="terminate(boolean)"> </a> <ul class="blockList"> <li class="blockList"> <h4>terminate</h4> <pre>public static&nbsp;void&nbsp;terminate(boolean&nbsp;waitForTransactions)</pre> <div class="block">Terminate the transaction reaper. This is a synchronous operation and will only return once the reaper has been shutdown cleanly. <p/> Note, this method assumes that the transaction system has been shutdown already so no new transactions can be created, or we could be here for a long time!</div> <dl><dt><span class="strong">Parameters:</span></dt><dd><code>waitForTransactions</code> - if <code>true</code> then the reaper will wait until all transactions have terminated (or been terminated by it). If <code>false</code> then the reaper will call setRollbackOnly on all the transactions.</dd></dl> </li> </ul> <a name="isDynamic()"> </a> <ul class="blockList"> <li class="blockList"> <h4>isDynamic</h4> <pre>public static&nbsp;boolean&nbsp;isDynamic()</pre> </li> </ul> <a name="transactionLifetime()"> </a> <ul class="blockListLast"> <li class="blockList"> <h4>transactionLifetime</h4> <pre>public static&nbsp;long&nbsp;transactionLifetime()</pre> </li> </ul> </li> </ul> </li> </ul> </div> </div> <div class="bottomNav"><a name="navbar_bottom"> </a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow"> </a> <ul class="navList" title="Navigation"> <li><a href="../../../../../overview-summary.html">Overview</a></li> <li><a href="package-summary.html">Package</a></li> <li class="navBarCell1Rev">Class</li> <li><a href="class-use/TransactionReaper.html">Use</a></li> <li><a href="package-tree.html">Tree</a></li> <li><a href="../../../../../deprecated-list.html">Deprecated</a></li> <li><a href="../../../../../index-all.html">Index</a></li> <li><a href="../../../../../help-doc.html">Help</a></li> </ul> <div class="aboutLanguage"><em><b>Narayana: narayana-full 5.0.4.Final-SNAPSHOT</b></em></div> </div> <div class="subNav"> <ul class="navList"> <li><a href="../../../../../com/arjuna/ats/arjuna/coordinator/SynchronizationRecord.html" title="interface in com.arjuna.ats.arjuna.coordinator"><span class="strong">Prev Class</span></a></li> <li><a href="../../../../../com/arjuna/ats/arjuna/coordinator/TwoPhaseCommitThreadPool.html" title="class in com.arjuna.ats.arjuna.coordinator"><span class="strong">Next Class</span></a></li> </ul> <ul class="navList"> <li><a href="../../../../../index.html?com/arjuna/ats/arjuna/coordinator/TransactionReaper.html" target="_top">Frames</a></li> <li><a href="TransactionReaper.html" target="_top">No Frames</a></li> </ul> <ul class="navList" id="allclasses_navbar_bottom"> <li><a href="../../../../../allclasses-noframe.html">All Classes</a></li> </ul> <div> <script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script> </div> <div> <ul class="subNavList"> <li>Summary:&nbsp;</li> <li>Nested&nbsp;|&nbsp;</li> <li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li> <li>Constr&nbsp;|&nbsp;</li> <li><a href="#method_summary">Method</a></li> </ul> <ul class="subNavList"> <li>Detail:&nbsp;</li> <li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li> <li>Constr&nbsp;|&nbsp;</li> <li><a href="#method_detail">Method</a></li> </ul> </div> <a name="skip-navbar_bottom"> </a></div> <p class="legalCopy"><small>Copyright &#169; 2014 <a href="http://www.jboss.org">JBoss by Red Hat</a>. All Rights Reserved.</small></p> </body> </html>