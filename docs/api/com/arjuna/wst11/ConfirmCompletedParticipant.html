<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html" charset="UTF-8"> <title>ConfirmCompletedParticipant (Narayana: narayana-full 5.0.4.Final-SNAPSHOT API)</title> <meta name="date" content="2014-11-19"> <link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style"> </head> <body> <script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ConfirmCompletedParticipant (Narayana: narayana-full 5.0.4.Final-SNAPSHOT API)";
    }
//-->
</script> <noscript> <div>JavaScript is disabled on your browser.</div> </noscript> <div class="topNav"><a name="navbar_top"> </a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow"> </a> <ul class="navList" title="Navigation"> <li><a href="../../../overview-summary.html">Overview</a></li> <li><a href="package-summary.html">Package</a></li> <li class="navBarCell1Rev">Class</li> <li><a href="class-use/ConfirmCompletedParticipant.html">Use</a></li> <li><a href="package-tree.html">Tree</a></li> <li><a href="../../../deprecated-list.html">Deprecated</a></li> <li><a href="../../../index-all.html">Index</a></li> <li><a href="../../../help-doc.html">Help</a></li> </ul> <div class="aboutLanguage"><em><b>Narayana: narayana-full 5.0.4.Final-SNAPSHOT</b></em></div> </div> <div class="subNav"> <ul class="navList"> <li><a href="../../../com/arjuna/wst11/CompletionCoordinatorParticipant.html" title="interface in com.arjuna.wst11"><span class="strong">Prev Class</span></a></li> <li>Next Class</li> </ul> <ul class="navList"> <li><a href="../../../index.html?com/arjuna/wst11/ConfirmCompletedParticipant.html" target="_top">Frames</a></li> <li><a href="ConfirmCompletedParticipant.html" target="_top">No Frames</a></li> </ul> <ul class="navList" id="allclasses_navbar_top"> <li><a href="../../../allclasses-noframe.html">All Classes</a></li> </ul> <div> <script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script> </div> <div> <ul class="subNavList"> <li>Summary:&nbsp;</li> <li>Nested&nbsp;|&nbsp;</li> <li>Field&nbsp;|&nbsp;</li> <li>Constr&nbsp;|&nbsp;</li> <li><a href="#method_summary">Method</a></li> </ul> <ul class="subNavList"> <li>Detail:&nbsp;</li> <li>Field&nbsp;|&nbsp;</li> <li>Constr&nbsp;|&nbsp;</li> <li><a href="#method_detail">Method</a></li> </ul> </div> <a name="skip-navbar_top"> </a></div> <div class="header"> <div class="subTitle">com.arjuna.wst11</div> <h2 title="Interface ConfirmCompletedParticipant" class="title">Interface ConfirmCompletedParticipant</h2> </div> <div class="contentContainer"> <div class="description"> <ul class="blockList"> <li class="blockList"> <hr> <br> <pre>public interface <span class="strong">ConfirmCompletedParticipant</span></pre> <div class="block">This interface can be implemented by a BA participant in order to allow it to perform its complete operation in two phases. This enables the participant to prepare changes to persistent state and then commit them i) after the participant recovery record has been written to disk but ii) before the coordinator is notified that the participant has completed. A participant completion participant is expected to prepare its changes before calling completed. The BA implementation will call confirmCompleted after writing a recovery record, ensuring compensation is possible before the changes are persisted. It will not notify the coordinator that the participant has completed until after the callback returns, ensuring that any notification received by the coordinator is valid. A coordinator completion participant is expected to prepare its changes when its completed method is called and then return. The BA implementation will call confirmCompleted after writing a recovery record, ensuring compensation is possible before the changes are persisted. It will not notify the coordinator that the participant has completed until after the callback returns, ensuring that any notification received by the coordinator is valid. The associated participant recovery module must be able to detect uncommitted changes. The logged recovery record should include some sort of identifier tying the changes to the participant. If the recovery module identifies uncommitted changes with no associated recovery record then a crash happened between prepare and completed and this means the changes should be rolled back (presumed abort). If the recovery module identifies uncommitted changes with an associated recovery record then a crash happened after completed but before the confirmCompleted callback. The changes can be rolled forward and the participant recreated. Alternatively, the changes can be rolled back and the participant record rejected. If a recovery record is found with no uncommitted changes then the participant can be safely recreated, allowing the recovery manager to resend a committed message. It is possible that a completion operation may be initiated and then be cancelled part way through, e.g. because a CANCEL message is received from the coordinator while writing the log record. in this case the client will need to roll back any uncommitted changes. A boolean flag argument to the confirmCompleted method is used to distinguish this case. If the flag is supplied as true then changes should be committed. If it is supplied as false then changes should be rolled back.</div> </li> </ul> </div> <div class="summary"> <ul class="blockList"> <li class="blockList"> <ul class="blockList"> <li class="blockList"><a name="method_summary"> </a> <h3>Method Summary</h3> <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation"> <caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption> <tr> <th class="colFirst" scope="col">Modifier and Type</th> <th class="colLast" scope="col">Method and Description</th> </tr> <tr class="altColor"> <td class="colFirst"><code>void</code></td> <td class="colLast"><code><strong><a href="../../../com/arjuna/wst11/ConfirmCompletedParticipant.html#confirmCompleted(boolean)">confirmCompleted</a></strong>(boolean&nbsp;confirmed)</code> <div class="block">a participant callback use to notify the participant either that a recovery record has been written to the log and hence that uncommitted changes should be committed or that completion was cancelled and hence that uncommitted changes should be rolled back.</div> </td> </tr> </table> </li> </ul> </li> </ul> </div> <div class="details"> <ul class="blockList"> <li class="blockList"> <ul class="blockList"> <li class="blockList"><a name="method_detail"> </a> <h3>Method Detail</h3> <a name="confirmCompleted(boolean)"> </a> <ul class="blockListLast"> <li class="blockList"> <h4>confirmCompleted</h4> <pre>void&nbsp;confirmCompleted(boolean&nbsp;confirmed)</pre> <div class="block">a participant callback use to notify the participant either that a recovery record has been written to the log and hence that uncommitted changes should be committed or that completion was cancelled and hence that uncommitted changes should be rolled back.</div> <dl><dt><span class="strong">Parameters:</span></dt><dd><code>confirmed</code> - true if the log record has been written and changes should be rolled forward and false if it has not been written and changes should be rolled back</dd></dl> </li> </ul> </li> </ul> </li> </ul> </div> </div> <div class="bottomNav"><a name="navbar_bottom"> </a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow"> </a> <ul class="navList" title="Navigation"> <li><a href="../../../overview-summary.html">Overview</a></li> <li><a href="package-summary.html">Package</a></li> <li class="navBarCell1Rev">Class</li> <li><a href="class-use/ConfirmCompletedParticipant.html">Use</a></li> <li><a href="package-tree.html">Tree</a></li> <li><a href="../../../deprecated-list.html">Deprecated</a></li> <li><a href="../../../index-all.html">Index</a></li> <li><a href="../../../help-doc.html">Help</a></li> </ul> <div class="aboutLanguage"><em><b>Narayana: narayana-full 5.0.4.Final-SNAPSHOT</b></em></div> </div> <div class="subNav"> <ul class="navList"> <li><a href="../../../com/arjuna/wst11/CompletionCoordinatorParticipant.html" title="interface in com.arjuna.wst11"><span class="strong">Prev Class</span></a></li> <li>Next Class</li> </ul> <ul class="navList"> <li><a href="../../../index.html?com/arjuna/wst11/ConfirmCompletedParticipant.html" target="_top">Frames</a></li> <li><a href="ConfirmCompletedParticipant.html" target="_top">No Frames</a></li> </ul> <ul class="navList" id="allclasses_navbar_bottom"> <li><a href="../../../allclasses-noframe.html">All Classes</a></li> </ul> <div> <script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script> </div> <div> <ul class="subNavList"> <li>Summary:&nbsp;</li> <li>Nested&nbsp;|&nbsp;</li> <li>Field&nbsp;|&nbsp;</li> <li>Constr&nbsp;|&nbsp;</li> <li><a href="#method_summary">Method</a></li> </ul> <ul class="subNavList"> <li>Detail:&nbsp;</li> <li>Field&nbsp;|&nbsp;</li> <li>Constr&nbsp;|&nbsp;</li> <li><a href="#method_detail">Method</a></li> </ul> </div> <a name="skip-navbar_bottom"> </a></div> <p class="legalCopy"><small>Copyright &#169; 2014 <a href="http://www.jboss.org">JBoss by Red Hat</a>. All Rights Reserved.</small></p> </body> </html>